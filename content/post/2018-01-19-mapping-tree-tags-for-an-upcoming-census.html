---
title: Suffix dead trees on the quadrat edge
author: Mauro Lepore
date: '2018-01-19'
tags:
  - fgeo
  - fgeo.map
  - fieldwork
  - map
  - R
  - tutorial
slug: mapping-tree-tags-for-an-upcoming-census
---



<p>To create maps for an upcoming fieldwork you can use the function <code>maply_tag()</code>. You can read the help file of <code>maply_tag()</code> <a href="https://forestgeo.github.io/fgeo.map/reference/maply_tag.html">here</a>, and you can preview the effect of changing the default behavior of this function using <a href="https://bookdown.org/fgeocomm/maply_tag_app/">this online app</a>. This blog shows the code used to maps created in January 2018. In particular it shows how to add a sufix to – exclusively – dead trees that lay on each quadrat’s edge.</p>
<div id="packages" class="section level2">
<h2>Packages</h2>
<pre class="r"><code>library(fgeo.map)
library(dplyr)
#&gt; 
#&gt; Attaching package: &#39;dplyr&#39;
#&gt; The following objects are masked from &#39;package:stats&#39;:
#&gt; 
#&gt;     filter, lag
#&gt; The following objects are masked from &#39;package:base&#39;:
#&gt; 
#&gt;     intersect, setdiff, setequal, union</code></pre>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<pre class="r"><code># `sinharaja::sinh_vft_20180118` is a private dataset. Instead use your data.
vft &lt;- sinharaja::sinh_vft_20180118
vft &lt;- setNames(vft, tolower(names(vft)))

# Filtering only a few quadrats for this example
tricky_quadrtat_numbers &lt;- c(&quot;0100&quot;, &quot;0101&quot;, &quot;1000&quot;)
vft &lt;- filter(vft, quadratname %in% tricky_quadrtat_numbers)
vft
#&gt; # A tibble: 1,096 x 7
#&gt;    tag       qx    qy quadratname status censusid plotid
#&gt;    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;int&gt;  &lt;int&gt;
#&gt;  1 010001 0.100 0.300 0100        alive         4      1
#&gt;  2 010002 0.100 0.500 0100        alive         4      1
#&gt;  3 010003 0.500 0.900 0100        alive         4      1
#&gt;  4 010004 0.600 0.900 0100        alive         4      1
#&gt;  5 010006 0.700 3.20  0100        alive         4      1
#&gt;  6 010007 0.200 3.70  0100        alive         4      1
#&gt;  7 010008 0.900 4.60  0100        alive         4      1
#&gt;  8 010009 1.20  5.00  0100        alive         4      1
#&gt;  9 010010 2.90  4.90  0100        alive         4      1
#&gt; 10 010011 3.90  3.90  0100        alive         4      1
#&gt; # ... with 1,086 more rows</code></pre>
</div>
<div id="suffix-dead-trees-on-the-quadrat-edge" class="section level2">
<h2>Suffix dead trees on the quadrat edge</h2>
<pre class="r"><code>suffixed &lt;- suffix_edge_tag(
  vft,
  .match = &quot;dead&quot;,
  suffix = &quot;_d&quot;,
  x_q = 20
)
#&gt; One or more trees spillover.
# Confirm that it worked
dplyr::filter(suffixed, status == &quot;dead&quot;, (qx &gt; 20 | qy &gt; 20))
#&gt; # A tibble: 2 x 7
#&gt;   tag         qx    qy quadratname status censusid plotid
#&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;int&gt;  &lt;int&gt;
#&gt; 1 010342_d  20.2  3.10 0101        dead          4      1
#&gt; 2 010544_d  20.1 17.1  0101        dead          4      1</code></pre>
</div>
<div id="map" class="section level2">
<h2>Map</h2>
<pre class="r"><code>p &lt;- maply_tag(suffixed, title_quad = &quot;Sinharaja, 2018.&quot;, move_edge = 0.5)</code></pre>
</div>
<div id="print-pdf" class="section level2">
<h2>Print pdf</h2>
<pre class="r"><code># Ensure R will let you print all the maps
maps_n &lt;- length(p)
a_little_more &lt;- 100
options(max.print = maps_n + a_little_more)
options(&quot;max.print&quot;)
#&gt; $max.print
#&gt; [1] 112</code></pre>
<pre class="r"><code>pdf(&quot;Sinharaja_20180119.pdf&quot;, paper = &quot;letter&quot;, height = 10.5, width = 8)
p
dev.off()</code></pre>
</div>
<div id="have-a-look" class="section level2">
<h2>Have a look</h2>
<p>Finally, this is what the four maps of the first quadrat look like.</p>
<p><img src="https://i.imgur.com/iYOhQeZ.png" /></p>
<p><img src="https://i.imgur.com/L0scORt.png" /></p>
<p><img src="https://i.imgur.com/Z4PkcTh.png" /></p>
<p><img src="https://i.imgur.com/nBhLzjs.png" /></p>
</div>
<div id="further-reading" class="section level1">
<h1>Further reading</h1>
<p><a href="https://fgeo.netlify.com/tags/fieldwork/">Other blogs about fieldwork</a></p>
</div>
