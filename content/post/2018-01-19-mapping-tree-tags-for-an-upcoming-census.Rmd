---
title: Suffix dead trees on the quadrat edge
author: Mauro Lepore
date: '2018-01-19'
tags:
  - fgeo
  - fgeo.map
  - fieldwork
  - map
  - R
  - tutorial
slug: mapping-tree-tags-for-an-upcoming-census
---

To create maps for an upcoming fieldwork you can use the function `maply_tag()`. You can read the help file of `maply_tag()` [here](https://forestgeo.github.io/fgeo.map/reference/maply_tag.html), and you can preview the effect of changing the default behavior of this function using [this online app](https://bookdown.org/fgeocomm/maply_tag_app/). This blog shows the code used to maps created in January 2018. In particular it shows how to add a sufix to -- exclusively -- dead trees that lay on each quadrat's edge.

```{r setup, include=FALSE}
set.seed(1014)
options(digits = 3)

knitr::opts_chunk$set(
  echo = TRUE,
  comment = "#>",
  collapse = TRUE,
  cache = TRUE,
  out.width = "98%", 
  fig.width = 12, 
  fig.asp = 0.75,
  fig.align = "center",
  fig.show = "hold"
)
```

## Packages

```{r}
library(fgeo.map)
library(dplyr)
```

## Data

```{r}
# `sinharaja::sinh_vft_20180118` is a private dataset. Instead use your data.
vft <- sinharaja::sinh_vft_20180118
vft <- setNames(vft, tolower(names(vft)))

# Filtering only a few quadrats for this example
tricky_quadrtat_numbers <- c("0100", "0101", "1000")
vft <- filter(vft, quadratname %in% tricky_quadrtat_numbers)
vft
```

## Suffix dead trees on the quadrat edge

```{r}
suffixed <- suffix_edge_tag(
  vft,
  .match = "dead",
  suffix = "_d",
  x_q = 20
)
# Confirm that it worked
dplyr::filter(suffixed, status == "dead", (qx > 20 | qy > 20))
```

## Map

```{r}
p <- maply_tag(suffixed, title_quad = "Sinharaja, 2018.", move_edge = 0.5)
```

## Print pdf

```{r}
# Ensure R will let you print all the maps
maps_n <- length(p)
a_little_more <- 100
options(max.print = maps_n + a_little_more)
options("max.print")
```

```{r, eval=FALSE}
pdf("Sinharaja_20180119.pdf", paper = "letter", height = 10.5, width = 8)
p
dev.off()
```

## Have a look

Finally, this is what the four maps of the first quadrat look like.

![](https://i.imgur.com/iYOhQeZ.png)

![](https://i.imgur.com/L0scORt.png)

![](https://i.imgur.com/Z4PkcTh.png)

![](https://i.imgur.com/nBhLzjs.png)

# Further reading

[Other blogs about fieldwork](https://fgeo.netlify.com/tags/fieldwork/)
